# プロジェクト制作ルール

## ⚠️ 重要：作業ディレクトリの確認（必須・最優先）

**すべてのファイル編集・Git操作は、必ずローカルプロジェクト（`C:\Users\mituo\Desktop\kaede`）で行うこと。**

**詳細**: [WORKDIR_GUIDE.md](docs/guides/WORKDIR_GUIDE.md) を参照してください。

## ページ制作の順序（重要）

1. **最初に `public/index.html` で制作**
   - CSSファイル（`public/styles.css`）を使用可能
   - 通常のWebサイトとして制作
   - Cloudflareなどでの公開を想定

2. **その後、`index-no-css.html` でCSSなし版を制作**
   - `public/index.html` の内容をベースにする
   - すべてのスタイルをインラインスタイル（style属性）に変換
   - `<style>`タグや`<link rel="stylesheet">`は使用禁止
   - 外部CSSファイルの参照は禁止
   - マッチングサイト内システム用（CSSが使えない環境）

## ファイル構成

```
public/
├── index.html      # CSSあり版（メイン）
├── styles.css      # スタイルシート
├── photo/          # 画像フォルダ
│   ├── rogo.png
│   ├── kaede.png
│   ├── kaon.png
│   ├── yukino.png
│   └── sora.png
└── noncss/
    └── index.html  # CSSなし版（未使用の場合は空）

index-no-css.html   # CSSなし版（ルート）
```

## 注意事項

- `public/index.html` を先に制作・更新する
- `index-no-css.html` は `public/index.html` の内容を基に作成
- CSSあり版を変更したら、必ずCSSなし版も同期して更新する

- 日本語で回答してください。
- コードを修正する際は、省略せずに変更箇所を含む全体像を把握してください。
- 既存のコードの機能を壊さないように注意してください。
- エラーの原因を推測する前に、まずはコードの論理的な矛盾を探してください。
- 曖昧なときは勝手に実装せず、私（ユーザー）に質問してください。

## ファイル操作のルール
- 新しいファイルを作成する際は、勝手に場所を決めず、必ず既存のディレクトリ構成に従ってください。
- 既存のファイルを修正する場合は、複製を作らずに、必ずそのファイル自体を編集してください。
- コードを提案する際は、そのファイルがプロジェクト内のどこにあるか（ファイルパス）を常に意識してください。
- ユーザーの「作業ファイル」ではなく、常に「プロジェクトルート」を基準に行動してください。
- **編集・作成するファイルは、必ずメインプロジェクト（`C:\Users\mituo\Desktop\kaede`）の絶対パスで指定すること。** ワークスペースがワークツリー（`.cursor\worktrees\kaede\*`）になっていても、作業先はメインプロジェクトに固定する。

## ⚠️ 作業用フォルダーの除外（重要）

**メインプロジェクトフォルダー（`C:\Users\mituo\Desktop\kaede`）で作業する際は、作業用フォルダー（`.wrangler`、ワークツリー）のファイルを読み込まないでください。**

- `.cursorignore` ファイルに記載されているパターンに従う
- メインプロジェクトフォルダー内のファイルのみを読み込む

**詳細**: [WORKDIR_GUIDE.md](docs/guides/WORKDIR_GUIDE.md) を参照してください。

## ⚠️ 作業用フォルダーの除外（最重要・強制ルール）

**メインプロジェクト（kaede直下）以外のファイルは、読み込みも編集も提案も一切禁止します。**

- `.git/worktrees/yyi` 内のファイルは、バックアップであっても「存在しないもの」として扱ってください。
- ファイルを作成・保存する際は、必ず `C:\Users\mituo\Desktop\kaede` の正規のディレクトリ構造（public/ など）を使用してください。
- 作業フォルダ（yyiなど）のパスが混じった提案をした場合は、即座に自己修正してください。

## ⚠️ 重要：勝手な修正を絶対禁止（最重要）

**以下のファイルは、ユーザーの明確な指示がない限り、一切修正してはいけません：**

- `.gitattributes` - Git のファイル処理設定。不正な修正は全ファイルを破損させます
- `.gitignore` - Git の無視設定。誤った修正はリポジトリを汚染します
- `wrangler.toml` - Cloudflare のデプロイ設定。不正な変更はデプロイを失敗させます
- `package.json` - 依存関係の定義。不正な修正はビルドを失敗させます

**これらのファイルを修正する場合：**

1. **必ずユーザーに相談してから**実施してください
2. 修正の理由を明確に説明してください
3. 修正前に現在の内容を確認してください
4. 予想される影響を説明してください
5. ユーザーの明確な同意を得てから実施してください

**例外は一切ありません。「パフォーマンス改善」「エラー修正」など、どのような理由でも、ユーザーの指示なしに修正しないでください。**

## ⚠️ ファイル破損の防止

**バイナリファイル（.png, .mp4, .jpg など）は、Git の設定によって破損する可能性があります：**

- `.gitattributes` の不正な設定は、すべての画像・動画ファイルを破損させます
- テキストエディタで開いたバイナリファイルが「テキスト行」として表示されている場合、ファイルは既に破損しています
- 破損したバイナリファイルは、元のコミットから復元する以外に修復方法がありません

**対策：**

- `.gitattributes` を修正する場合は、3重に確認してからユーザーに相談してください
- バイナリファイルの変更が Git で検出された場合、すぐにユーザーに報告してください
