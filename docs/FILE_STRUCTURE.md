# ファイル構成 - 各鑑定士の設定ファイル

## 📂 各鑑定士の設定が分かれている理由

各鑑定士には**2つの設定ファイル**があります：

```
鑑定士（例: 笹岡雪乃）
│
├─ 【バックエンド】functions\_lib\characters\yukino.js
│  └─ AIの性格・話し方・プロンプト
│     ・雪乃の口調（「優しく微笑みながら」など）
│     ・カードの解説方法
│     ・「次は現在のカードをめくってみましょうね」というフレーズ
│     ・まとめ鑑定の内容
│
└─ 【フロントエンド】public\js\features\yukino-tarot.js
   └─ UI・カード表示・動作
      ・カードの画像表示
      ・ボタンの表示・クリック動作
      ・AIの返答から「次は現在のカード」を検出
      ・次のカードへ進むロジック
```

---

## 🎭 全鑑定士のファイル一覧

### 楓（かえで）

**バックエンド**: `functions\_lib\characters\kaede.js`
- 楓の性格設定
- 仏教的な話し方
- 鑑定内容の方針

**フロントエンド**: 
- （特殊な機能がある場合）`public\js\features\kaede-*.js`
- （通常の会話のみの場合は不要）

---

### 花音（かのん）

**バックエンド**: `functions\_lib\characters\kaon.js`
- 花音の性格設定
- 倫理的な話し方
- 鑑定内容の方針

**フロントエンド**: 
- （特殊な機能がある場合）`public\js\features\kaon-*.js`
- （通常の会話のみの場合は不要）

---

### 空（そら）

**バックエンド**: `functions\_lib\characters\sora.js`
- 空の性格設定
- 母性的な話し方
- 鑑定内容の方針

**フロントエンド**: 
- （特殊な機能がある場合）`public\js\features\sora-*.js`
- （通常の会話のみの場合は不要）

---

### 笹岡雪乃（ささおかゆきの）

**バックエンド**: `functions\_lib\characters\yukino.js`
- 雪乃の性格設定
- タロット占いの解説方法
- 「次は〇〇のカードをめくってみましょうね」というフレーズ
- まとめ鑑定の内容

**フロントエンド**: `public\js\features\yukino-tarot.js`
- タロットカードの画像表示
- カードをめくるアニメーション
- 「過去のタロットカードを見る」ボタン
- 「次のカードを見る」ボタン
- 「雪乃のまとめ」ボタン
- AIの返答から次のカード位置を検出

---

## 🔧 修正が必要なとき

| 変更内容 | 修正ファイル | 種別 |
|---------|------------|------|
| 鑑定士の口調を変える | `functions\_lib\characters\*.js` | バックエンド |
| 鑑定内容を変える | `functions\_lib\characters\*.js` | バックエンド |
| AIが生成するフレーズを変える | `functions\_lib\characters\*.js` | バックエンド |
| ボタンのデザインを変える | `public\js\features\*.js` | フロントエンド |
| カード表示のアニメーションを変える | `public\js\features\*.js` | フロントエンド |
| AIの返答を検出するキーワードを変える | `public\js\features\*.js` | フロントエンド |
| カードの進行ロジックを変える | `public\js\features\*.js` | フロントエンド |

---

## ⚠️ 両方の修正が必要な場合

もし**バックエンド**で新しいフレーズを追加した場合、**フロントエンド**でもそのフレーズを検出できるようにする必要があります。

**例**: 雪乃のタロット占い

1. **バックエンド**で新しいフレーズを追加:
   ```javascript
   // functions\_lib\characters\yukino.js
   「それでは次は未来のカードをめくってみましょうね」
   ```

2. **フロントエンド**でそのフレーズを検出:
   ```javascript
   // public\js\features\yukino-tarot.js
   if (text.includes('次は未来のカード')) {
       return '未来';
   }
   ```

**両方を一致させないと、フレーズは表示されるがボタンが表示されない問題が発生します。**

---

## 📝 まとめ

- **バックエンド** = AIが何を言うか
- **フロントエンド** = UIがどう動くか
- 両方を連携させる必要がある場合もある


