# 管理画面でのテスト機能の使い方

## テストタブの場所

管理画面（`/pages/admin/dashboard`）にアクセスしたら、以下の手順でテスト機能を確認できます。

## 手順

### 1. 管理者トークンを入力して接続

1. 画面上部の「管理操作用のパスコード（X-Admin-Token）」欄に管理者トークンを入力
2. 「接続」ボタンをクリック
3. 接続状態が「接続済み」になることを確認

### 2. 左側のナビゲーションメニューを確認

接続後、**左側の「管理メニュー」セクション**に以下の2つのボタンが表示されます：

```
管理メニュー
├─ ユーザー検索          ← 現在表示されているタブ
└─ 性格設定テスト        ← これがテストタブです！
```

### 3. 「性格設定テスト」ボタンをクリック

左側のナビゲーションメニューから**「性格設定テスト」**ボタンをクリックしてください。

### 4. テストを実行

テストタブが表示されたら：

1. **「🧪 テストを実行」**ボタンをクリック
2. テストが実行されます（数秒かかります）
3. テスト結果が表示されます：
   - テスト結果サマリー（総テスト数、成功数、失敗数、成功率）
   - 各鑑定士（楓、雪乃、ソラ、花音）のテスト結果
   - システムプロンプト生成の統合テスト結果

## テスト結果の見方

### サマリー

- **総テスト数**: 実行されたテストの総数
- **成功**: 成功したテスト数（緑色）
- **失敗**: 失敗したテスト数（赤色）
- **成功率**: 成功したテストの割合（%）

### 各鑑定士のテスト結果

各鑑定士ごとに以下の情報が表示されます：

- **基本設定が含まれている**: 名前や年齢・性別などの基本情報
- **話し方の設定が反映されている**: 話し方の特徴（敬語、タメ口など）
- **特徴的な設定が含まれている**: 各鑑定士の特徴（守護神、タロット、共感力など）

✅ が表示されていれば成功、❌ が表示されていれば失敗です。

## トラブルシューティング

### 「性格設定テスト」ボタンが表示されない場合

1. **ブラウザのキャッシュをクリア**
   - ブラウザの設定からキャッシュをクリア
   - または、強制リロード（Ctrl+F5 または Cmd+Shift+R）

2. **最新のコードがデプロイされているか確認**
   - GitHubにプッシュした後、Cloudflare Pagesにデプロイされているか確認
   - デプロイには数分かかる場合があります

3. **HTMLファイルを直接確認**
   - ブラウザの開発者ツール（F12）を開く
   - Elementsタブで、`<nav class="admin-navigation">`内に「性格設定テスト」ボタンがあるか確認

### テスト実行時にエラーが表示される場合

1. **管理者トークンが正しく入力されているか確認**
   - トークンが正しくないと、401エラーが表示されます

2. **APIエンドポイントが正しくデプロイされているか確認**
   - `/api/admin/run-tests` エンドポイントが存在するか確認

3. **ブラウザのコンソールでエラーを確認**
   - 開発者ツール（F12）のConsoleタブでエラーメッセージを確認

## スクリーンショットの説明

管理画面の左側に以下のようなナビゲーションメニューが表示されます：

```
┌─────────────────────────┐
│   管理メニュー          │
├─────────────────────────┤
│ [ユーザー検索]          │ ← 現在のタブ
│                         │
│ [性格設定テスト]        │ ← これをクリック！
└─────────────────────────┘
```

「性格設定テスト」をクリックすると、右側のコンテンツエリアにテスト画面が表示されます。
