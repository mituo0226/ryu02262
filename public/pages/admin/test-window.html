<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åˆå›ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ - é‹å‘½ã®æ‰‰</title>
  <link rel="stylesheet" href="../../css/styles.css">
  <style>
    :root { color-scheme: dark; }
    * {
      box-sizing: border-box;
    }
    
    body {
      background: #05040a;
      min-height: 100vh;
      margin: 0;
      font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      color: #f7f5ff;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆå›ºå®šï¼‰ */
    header {
      flex-shrink: 0;
      padding: 16px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
    }
    
    header h1 {
      margin: 0 0 4px;
      font-size: 18px;
      font-weight: 600;
    }
    
    header .muted {
      color: #9da2c6;
      font-size: 12px;
      margin: 0;
    }
    
    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .main-content {
      flex: 1;
      display: flex;
      gap: 16px;
      padding: 16px;
      overflow: hidden;
    }
    
    /* å·¦å´ï¼šãƒ†ã‚¹ãƒˆæ“ä½œãƒ‘ãƒãƒ« */
    .test-controls {
      flex: 0 0 320px;
      background: rgba(138, 43, 226, 0.1);
      border: 1px solid rgba(138, 43, 226, 0.3);
      border-radius: 12px;
      padding: 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .test-controls h2 {
      margin: 0 0 12px;
      font-size: 16px;
      color: #d6c9ff;
    }
    
    .test-controls label {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 13px;
      color: #bfc4ff;
    }
    
    .test-controls select {
      padding: 8px 12px;
      border: 1px solid rgba(138, 43, 226, 0.3);
      border-radius: 6px;
      background: rgba(0, 0, 0, 0.3);
      color: #fff;
      font-size: 13px;
    }
    
    .test-controls button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.3s ease;
    }
    
    .test-controls button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(138, 43, 226, 0.3);
    }
    
    .test-controls .btn-primary {
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.9), rgba(75, 0, 129, 0.9));
      border: 1px solid rgba(138, 43, 226, 0.5);
    }
    
    .test-controls .btn-success {
      background: linear-gradient(135deg, rgba(0, 200, 120, 0.9), rgba(0, 150, 100, 0.9));
      border: 1px solid rgba(0, 200, 120, 0.5);
    }
    
    .test-controls .btn-danger {
      background: rgba(255, 100, 100, 0.7);
      border: 1px solid rgba(255, 100, 100, 0.5);
    }
    
    .test-status {
      font-size: 12px;
      color: #bfc4ff;
      padding: 8px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 6px;
      min-height: 30px;
    }
    
    /* å³å´ï¼šãƒãƒ£ãƒƒãƒˆç”»é¢ */
    .chat-screen {
      flex: 1;
      background: rgba(138, 43, 226, 0.05);
      border: 1px solid rgba(138, 43, 226, 0.2);
      border-radius: 12px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .chat-screen-header {
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(138, 43, 226, 0.3);
    }
    
    .chat-screen-header h2 {
      margin: 0;
      font-size: 14px;
      color: #d6c9ff;
    }
    
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 12px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      margin-bottom: 12px;
    }
    
    .message {
      padding: 12px;
      border-radius: 8px;
      word-wrap: break-word;
      animation: slideInMessage 0.4s ease;
      max-width: 85%;
    }
    
    .message.system {
      background: rgba(138, 43, 226, 0.2);
      border-left: 3px solid rgba(138, 43, 226, 0.6);
      color: #d6c9ff;
      text-align: center;
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
      font-size: 12px;
    }
    
    .message.assistant {
      background: rgba(138, 43, 226, 0.15);
      border: 1px solid rgba(138, 43, 226, 0.3);
      color: #f7f5ff;
      margin-right: auto;
    }
    
    .message.user {
      background: rgba(75, 120, 180, 0.15);
      border: 1px solid rgba(75, 120, 180, 0.3);
      color: #b8d4ff;
      margin-left: auto;
    }
    
    @keyframes slideInMessage {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .placeholder {
      color: #bfc4ff;
      font-size: 13px;
      text-align: center;
      padding: 40px 20px;
      margin: auto;
    }
    
    /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
    }
    
    ::-webkit-scrollbar-thumb {
      background: rgba(138, 43, 226, 0.4);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(138, 43, 226, 0.6);
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ¬ åˆå›ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆ</h1>
    <p class="muted" id="testInfo"></p>
  </header>

  <div class="main-content">
    <!-- å·¦å´ï¼šãƒ†ã‚¹ãƒˆæ“ä½œãƒ‘ãƒãƒ« -->
    <div class="test-controls">
      <div>
        <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆæ“ä½œ</h2>
        
        <label>ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
          <select id="testUserSelect">
            <option value="">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ</option>
          </select>
        </label>
        
        <label>ãƒ†ã‚¹ãƒˆå¯¾è±¡é‘‘å®šå£«
          <select id="testCharacterSelect">
            <option value="kaede">æ¥“</option>
            <option value="yukino">ç¬¹å²¡é›ªä¹ƒ</option>
            <option value="sora">ç©º</option>
            <option value="kaon">ä¸‰å´èŠ±éŸ³</option>
          </select>
        </label>
      </div>
      
      <div>
        <button class="btn-primary" id="testFirstVisitButton">
          ğŸ¬ åˆå›è¨ªå•ã‚’ãƒ†ã‚¹ãƒˆ
        </button>
        <button class="btn-success" id="testReturningVisitButton">
          ğŸ”„ å†è¨ªå•ã‚’ãƒ†ã‚¹ãƒˆ
        </button>
        <button class="btn-danger" id="clearHistoryButton">
          ğŸ—‘ï¸ å±¥æ­´ã‚’å‰Šé™¤
        </button>
      </div>
      
      <div class="test-status" id="testStatus">å¾…æ©Ÿä¸­...</div>
    </div>

    <!-- å³å´ï¼šãƒãƒ£ãƒƒãƒˆç”»é¢ -->
    <div class="chat-screen">
      <div class="chat-screen-header">
        <h2 id="chatTitle">ğŸ“ ãƒãƒ£ãƒƒãƒˆç”»é¢</h2>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="placeholder">ğŸ’¬ ãƒ†ã‚¹ãƒˆæ“ä½œã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„</div>
      </div>
      
      <!-- ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ -->
      <div style="display: flex; gap: 8px; padding-top: 12px; border-top: 1px solid rgba(138, 43, 226, 0.2);">
        <input id="userMessageInput" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." style="flex: 1; padding: 10px 12px; border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: #fff; font-size: 13px;">
        <button id="sendMessageButton" type="button" style="padding: 10px 16px; background: linear-gradient(135deg, rgba(138, 43, 226, 0.9), rgba(75, 0, 129, 0.9)); border: none; border-radius: 6px; color: #fff; cursor: pointer; font-weight: 600; font-size: 13px;">é€ä¿¡</button>
      </div>

      <!-- è³ªå•ãƒ»è¦æœ›ãƒ‘ãƒãƒ« -->
      <div style="margin-top: 12px; padding: 12px; background: rgba(75, 120, 180, 0.1); border: 1px solid rgba(75, 120, 180, 0.3); border-radius: 8px;">
        <details style="cursor: pointer;">
          <summary style="color: #b8d4ff; font-weight: 600; font-size: 13px; user-select: none;">
            ğŸ’¬ ãƒ†ã‚¹ãƒˆä¸­ã®è³ªå•ãƒ»è¦æœ›
          </summary>
          <div style="margin-top: 12px; display: flex; flex-direction: column; gap: 8px;">
            <textarea id="feedbackInput" placeholder="ä¾‹ï¼šã‚¿ãƒ­ãƒƒãƒˆé‘‘å®šãŒå§‹ã¾ã‚‰ãªã„&#10;æœŸå¾…ï¼šã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¾Œã€é‘‘å®šç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹&#10;å®Ÿéš›ï¼šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ã§æ­¢ã¾ã‚‹" style="width: 100%; padding: 8px 12px; border: 1px solid rgba(75, 120, 180, 0.3); border-radius: 6px; background: rgba(0, 0, 0, 0.3); color: #fff; font-size: 12px; min-height: 80px; resize: vertical;"></textarea>
            <button id="submitFeedbackButton" type="button" style="padding: 8px 12px; background: rgba(75, 120, 180, 0.7); border: none; border-radius: 6px; color: #fff; cursor: pointer; font-weight: 600; font-size: 12px;">âœ“ è¦æœ›ã‚’é€ä¿¡</button>
            <p id="feedbackStatus" style="margin: 0; font-size: 12px; color: #bfc4ff;"></p>
          </div>
        </details>
      </div>
    </div>
  </div>

  <script>
    // URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æƒ…å ±ã‚’å–å¾—
    const urlParams = new URLSearchParams(window.location.search);
    const userId = urlParams.get('userId');
    const characterId = urlParams.get('character');
    
    const testUserSelect = document.getElementById('testUserSelect');
    const testCharacterSelect = document.getElementById('testCharacterSelect');
    const testFirstVisitButton = document.getElementById('testFirstVisitButton');
    const testReturningVisitButton = document.getElementById('testReturningVisitButton');
    const clearHistoryButton = document.getElementById('clearHistoryButton');
    const testStatus = document.getElementById('testStatus');
    const chatMessages = document.getElementById('chatMessages');
    const chatTitle = document.getElementById('chatTitle');
    const testInfo = document.getElementById('testInfo');
    const userMessageInput = document.getElementById('userMessageInput');
    const sendMessageButton = document.getElementById('sendMessageButton');
    const feedbackInput = document.getElementById('feedbackInput');
    const submitFeedbackButton = document.getElementById('submitFeedbackButton');
    const feedbackStatus = document.getElementById('feedbackStatus');
    
    let users = [];
    let selectedUserId = userId;
    let selectedCharacter = characterId || 'kaede';
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—
    async function fetchUsers() {
      try {
        const res = await fetch('/api/admin/users');
        if (!res.ok) throw new Error('ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—å¤±æ•—');
        const data = await res.json();
        users = data.users || [];
        
        // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«è¿½åŠ 
        testUserSelect.innerHTML = '<option value="">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ</option>';
        users.forEach(user => {
          const option = document.createElement('option');
          option.value = user.id;
          option.textContent = `${user.nickname} (ID: ${user.id})`;
          testUserSelect.appendChild(option);
        });
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚Œã°ã‚»ãƒƒãƒˆ
        if (userId) {
          testUserSelect.value = userId;
        }
        
        if (characterId) {
          testCharacterSelect.value = characterId;
        }
        
        updateTestInfo();
      } catch (error) {
        testStatus.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
      }
    }
    
    function updateTestInfo() {
      const user = users.find(u => u.id == selectedUserId);
      if (user) {
        testInfo.textContent = `ãƒ¦ãƒ¼ã‚¶ãƒ¼: ${user.nickname} | é‘‘å®šå£«: ${selectedCharacter}`;
      }
    }
    
    // åˆå›è¨ªå•ãƒ†ã‚¹ãƒˆ
    testFirstVisitButton.addEventListener('click', async () => {
      selectedUserId = testUserSelect.value;
      selectedCharacter = testCharacterSelect.value;
      
      if (!selectedUserId) {
        testStatus.textContent = 'âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„';
        return;
      }
      
      testStatus.textContent = 'ğŸ”„ åˆå›è¨ªå•ã‚’ãƒ†ã‚¹ãƒˆä¸­...';
      chatMessages.innerHTML = '<div class="placeholder">ğŸ’¬ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>';
      
      try {
        const res = await fetch('/api/generate-welcome', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            character: selectedCharacter,
            userId: Number(selectedUserId),
            visitPattern: 'first_visit',
          }),
        });
        
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'ãƒ†ã‚¹ãƒˆå¤±æ•—');
        
        displayMessage('system', `ğŸ¬ åˆå›è¨ªå•ãƒ†ã‚¹ãƒˆ: ${selectedCharacter}`);
        displayMessage('assistant', data.message || 'ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—ï¼‰');
        
        chatTitle.textContent = `ğŸ“ ${selectedCharacter} - åˆå›è¨ªå•`;
        testStatus.textContent = 'âœ… ãƒ†ã‚¹ãƒˆå®Œäº†';
        updateTestInfo();
      } catch (error) {
        testStatus.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
      }
    });
    
    // å†è¨ªå•ãƒ†ã‚¹ãƒˆ
    testReturningVisitButton.addEventListener('click', async () => {
      selectedUserId = testUserSelect.value;
      selectedCharacter = testCharacterSelect.value;
      
      if (!selectedUserId) {
        testStatus.textContent = 'âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„';
        return;
      }
      
      testStatus.textContent = 'ğŸ”„ å†è¨ªå•ã‚’ãƒ†ã‚¹ãƒˆä¸­...';
      chatMessages.innerHTML = '<div class="placeholder">ğŸ’¬ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>';
      
      try {
        const res = await fetch('/api/generate-welcome', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            character: selectedCharacter,
            userId: Number(selectedUserId),
            visitPattern: 'returning',
          }),
        });
        
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'ãƒ†ã‚¹ãƒˆå¤±æ•—');
        
        displayMessage('system', `ğŸ¬ å†è¨ªå•ãƒ†ã‚¹ãƒˆ: ${selectedCharacter}`);
        displayMessage('assistant', data.message || 'ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—ï¼‰');
        
        chatTitle.textContent = `ğŸ“ ${selectedCharacter} - å†è¨ªå•`;
        testStatus.textContent = 'âœ… ãƒ†ã‚¹ãƒˆå®Œäº†';
        updateTestInfo();
      } catch (error) {
        testStatus.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
      }
    });
    
    // å±¥æ­´å‰Šé™¤
    clearHistoryButton.addEventListener('click', async () => {
      selectedUserId = testUserSelect.value;
      selectedCharacter = testCharacterSelect.value;
      
      if (!selectedUserId) {
        testStatus.textContent = 'âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„';
        return;
      }
      
      if (!confirm(`${selectedCharacter}ã¨ã®ä¼šè©±å±¥æ­´ã‚’å…¨ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) return;
      
      testStatus.textContent = 'ğŸ”„ å±¥æ­´ã‚’å‰Šé™¤ä¸­...';
      
      try {
        const res = await fetch('/api/admin/conversations', {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            userId: Number(selectedUserId),
            characterId: selectedCharacter,
            deleteAll: true,
          }),
        });
        
        if (!res.ok) throw new Error('å‰Šé™¤å¤±æ•—');
        testStatus.textContent = 'âœ… å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã—ãŸ';
        chatMessages.innerHTML = '<div class="placeholder">ğŸ’¬ å±¥æ­´ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸ</div>';
      } catch (error) {
        testStatus.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
      }
    });
    
    function displayMessage(role, content) {
      // æ—¢å­˜ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’å‰Šé™¤
      const placeholder = chatMessages.querySelector('.placeholder');
      if (placeholder) {
        placeholder.remove();
      }
      
      const msgEl = document.createElement('div');
      msgEl.className = `message ${role}`;
      
      if (role === 'system') {
        msgEl.textContent = content;
      } else if (role === 'assistant') {
        msgEl.innerHTML = `<strong style="color: #d6c9ff; font-size: 12px;">é‘‘å®šå£«:</strong><br><span style="font-size: 13px; line-height: 1.5;">${content.replace(/\n/g, '<br>')}</span>`;
      } else if (role === 'user') {
        msgEl.innerHTML = `<strong style="color: #75b8ff; font-size: 12px;">ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong><br><span style="font-size: 13px; line-height: 1.5;">${content}</span>`;
      }
      
      chatMessages.appendChild(msgEl);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
    sendMessageButton.addEventListener('click', async () => {
      const message = userMessageInput.value.trim();
      if (!message) return;
      
      selectedUserId = testUserSelect.value;
      selectedCharacter = testCharacterSelect.value;
      
      if (!selectedUserId) {
        testStatus.textContent = 'âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„';
        return;
      }
      
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      displayMessage('user', message);
      userMessageInput.value = '';
      
      testStatus.textContent = 'ğŸ”„ å›ç­”ç”Ÿæˆä¸­...';
      
      try {
        const res = await fetch('/api/consult', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            character: selectedCharacter,
            userId: Number(selectedUserId),
            message: message,
          }),
        });
        
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'é€ä¿¡å¤±æ•—');
        
        displayMessage('assistant', data.response || 'ï¼ˆå›ç­”ãªã—ï¼‰');
        testStatus.textContent = 'âœ… å›ç­”ã‚’è¡¨ç¤ºã—ã¾ã—ãŸ';
      } catch (error) {
        testStatus.textContent = `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
        displayMessage('system', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
      }
    });
    
    // Enterã‚­ãƒ¼ã§é€ä¿¡
    userMessageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessageButton.click();
      }
    });
    
    // è¦æœ›é€ä¿¡
    submitFeedbackButton.addEventListener('click', () => {
      const feedback = feedbackInput.value.trim();
      if (!feedback) {
        feedbackStatus.textContent = 'âŒ è¦æœ›ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
        return;
      }
      
      const feedbackData = {
        timestamp: new Date().toISOString(),
        userId: selectedUserId,
        character: selectedCharacter,
        feedback: feedback,
        url: window.location.href,
      };
      
      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
      const feedbackHistory = JSON.parse(localStorage.getItem('testFeedbackHistory') || '[]');
      feedbackHistory.push(feedbackData);
      localStorage.setItem('testFeedbackHistory', JSON.stringify(feedbackHistory));
      
      feedbackStatus.textContent = 'âœ… è¦æœ›ã‚’é€ä¿¡ã—ã¾ã—ãŸ';
      feedbackInput.value = '';
      
      setTimeout(() => {
        feedbackStatus.textContent = '';
      }, 3000);
    });
    
    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—
    fetchUsers();
  </script>
</body>
</html>
