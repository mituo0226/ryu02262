<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水野ソラへの導き - 運命の扉</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="back-transition-page">
    <div class="image-transition-container">
        <img src="photo/sora.png" alt="水野ソラ" class="fortune-teller-image-back" id="fortuneImage">
        <video 
            src="photo/back.mp4" 
            class="back-video" 
            id="backVideo"
            playsinline
            webkit-playsinline
            autoplay
            muted
            preload="auto"
        ></video>
        
        <div class="message-flow">
            <p>あなたの心の迷いを<br>鑑定士に打ち明けてください</p>
        </div>

        <div class="final-button-container">
            <a href="#" class="talk-button" onclick="return false;">水野ソラに話しかける</a>
        </div>
    </div>

    <script>
        const backVideo = document.getElementById('backVideo');
        
        // iPhoneでの動画表示制限を回避するための設定
        backVideo.setAttribute('playsinline', 'true');
        backVideo.setAttribute('webkit-playsinline', 'true');
        backVideo.setAttribute('x5-video-player-type', 'h5');
        backVideo.setAttribute('x5-video-player-fullscreen', 'true');
        backVideo.setAttribute('x5-video-orientation', 'portrait');
        
        // 動画が終了したら停止状態を維持（ループしない）
        backVideo.addEventListener('ended', () => {
            backVideo.pause();
        });

        // 動画の読み込み完了を待つ
        backVideo.addEventListener('loadedmetadata', () => {
            backVideo.play().catch(err => {
                console.log('自動再生がブロックされました:', err);
            });
        });

        // 動画の再生を強制
        setTimeout(() => {
            backVideo.play().catch(err => {
                console.log('動画再生エラー:', err);
            });
        }, 2500);
    </script>
</body>
</html>
